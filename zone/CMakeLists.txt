CMAKE_MINIMUM_REQUIRED(VERSION 2.8)

SET(zone_sources
	aa.cpp
	aa_ability.cpp
	aggro.cpp
	aggromanager.cpp
	aura.cpp
	attack.cpp
	beacon.cpp
	bonuses.cpp
	bot.cpp
	bot_command.cpp
	bot_database.cpp
	botspellsai.cpp
	client.cpp
	client_mods.cpp
	client_packet.cpp
	client_process.cpp
	command.cpp
	corpse.cpp
	data_bucket.cpp
	doors.cpp
	effects.cpp
	embparser.cpp
	embparser_api.cpp
	embperl.cpp
	embxs.cpp
	encounter.cpp
	entity.cpp
	exp.cpp
	fastmath.cpp
	fearpath.cpp
	forage.cpp
	groups.cpp
	guild.cpp
	guild_mgr.cpp
	hate_list.cpp
	heal_rotation.cpp
	horse.cpp
	inventory.cpp
	loottables.cpp
	embperl.cpp
	embxs.cpp
	entity.cpp
	exp.cpp
	fearpath.cpp
	forage.cpp
	global_loot_manager.cpp
	groups.cpp
	guild.cpp
	guild_mgr.cpp
	hate_list.cpp
	horse.cpp
	inventory.cpp
	loottables.cpp
	map.cpp
	merc.cpp
	mob.cpp
	mob_ai.cpp
	mod_functions.cpp
	net.cpp
	npc.cpp
	npc_ai.cpp
	object.cpp
	oriented_bounding_box.cpp
	pathfinder_interface.cpp
	pathfinder_nav_mesh.cpp
	pathfinder_null.cpp
	pathfinder_waypoint.cpp
	pathing.cpp
	perl_client.cpp
	perl_doors.cpp
	perl_entity.cpp
	perl_groups.cpp
	perl_hateentry.cpp
	perl_mob.cpp
	perl_npc.cpp
	perl_object.cpp
	perl_perlpacket.cpp
	perl_player_corpse.cpp
	perl_questitem.cpp
	perl_raids.cpp
	perlpacket.cpp
	petitions.cpp
	pets.cpp
	position.cpp
	qglobals.cpp
	queryserv.cpp
	questmgr.cpp
	quest_parser_collection.cpp
	raids.cpp
	raycast_mesh.cpp
	spawn2.cpp
	spawn2.h
	spawngroup.cpp
	special_attacks.cpp
	spell_effects.cpp
	spells.cpp
	tasks.cpp
	titles.cpp
	tradeskills.cpp
	trading.cpp
	trap.cpp
	tribute.cpp
	tune.cpp
	water_map.cpp
	water_map_v1.cpp
	water_map_v2.cpp
	waypoints.cpp
	worldserver.cpp
	xtargetautohaters.cpp
	zone.cpp
	zone_config.cpp
	zonedb.cpp
	zoning.cpp
)

SET(zone_headers
	aa.h
	aa_ability.h
	aggromanager.h
	aura.h
	basic_functions.h
	beacon.h
	bot.h
	bot_command.h
	bot_database.h
	bot_structs.h
	client.h
	client_packet.h
	command.h
	common.h
	corpse.h
	data_bucket.h
	doors.h
	embparser.h
	embperl.h
	embxs.h
	encounter.h
	entity.h
	errmsg.h
	event_codes.h
	fastmath.h
	forage.h
	global_loot_manager.h
	groups.h
	guild_mgr.h
	hate_list.h
	heal_rotation.h
	horse.h
	map.h
	masterentity.h
	maxskill.h
	message.h
	merc.h
	mob.h
	net.h
	npc.h
	npc_ai.h
	object.h
	oriented_bounding_box.h
	pathfinder_interface.h
	pathfinder_nav_mesh.h
	pathfinder_null.h
	pathfinder_waypoint.h
	perlpacket.h
	petitions.h
	pets.h
	position.h
	qglobals.h
	quest_interface.h
	queryserv.h
	quest_interface.h
	questmgr.h
	quest_parser_collection.h
	raid.h
	raids.h
	raycast_mesh.h
	skills.h
	spawn2.cpp
	spawn2.h
	spawngroup.h
	string_ids.h
	tasks.h
	titles.h
	trap.h
	water_map.h
	water_map_v1.h
	water_map_v2.h
	worldserver.h
	xtargetautohaters.h
	zone.h
	zone_config.h
	zonedb.h
	zonedump.h
)

IF(EQEMU_BUILD_LUA)

SET(zone_sources ${zone_sources}
	lua/lua_client.cpp
	lua/lua_corpse.cpp
	lua/lua_door.cpp
	lua/lua_entity.cpp
	lua/lua_extra_attack_options.cpp
	lua/lua_npc.cpp
	lua/lua_mob.cpp
	lua/lua_object.cpp
	lua/lua_general.cpp
	lua/lua_parser.cpp
)

SET(zone_headers ${zone_headers}
	lua/lua_events.h
	lua/lua_forward.h
	lua/lua_parser.h
	lua/lua_structs.h
)

SOURCE_GROUP(lua FILES
	lua/lua_client.cpp
	lua/lua_corpse.cpp
	lua/lua_door.cpp
	lua/lua_entity.cpp
	lua/lua_extra_attack_options.cpp
	lua/lua_events.h
	lua/lua_forward.h
	lua/lua_npc.cpp
	lua/lua_mob.cpp
	lua/lua_object.cpp
	lua/lua_general.cpp
	lua/lua_parser.cpp
	lua/lua_parser.h
	lua/lua_structs.h
)

endif()

IF(EQEMU_DEPOP_INVALIDATES_CACHE)
	ADD_DEFINITIONS(-DDEPOP_INVALIDATES_NPC_TYPES_CACHE)
ENDIF(EQEMU_DEPOP_INVALIDATES_CACHE)

ADD_EXECUTABLE(zone ${zone_sources} ${zone_headers})

INSTALL(TARGETS zone RUNTIME DESTINATION ${CMAKE_INSTALL_PREFIX}/bin)

ADD_DEFINITIONS(-DZONE)

TARGET_LINK_LIBRARIES(zone ${SERVER_LIBS})

IF(EQEMU_BUILD_PERL)
	TARGET_LINK_LIBRARIES(zone ${PERL_LIBRARY})
ENDIF()

IF(EQEMU_BUILD_LUA)
	TARGET_LINK_LIBRARIES(zone luabind ${LUA_LIBRARY})
ENDIF(EQEMU_BUILD_LUA)

SET(EXECUTABLE_OUTPUT_PATH ${PROJECT_BINARY_DIR}/bin)
